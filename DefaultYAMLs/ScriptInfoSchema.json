{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Script dependencies",
    "description": "Script dependencies setup",
    "type": "object",
    "properties": 
    {
        "Language": 
        {
            "type": "string",
            "description": "(Optional) Language of the script"
        },
        "RequiredProfiles":
        {
            "type": "object",
            "patternProperties":
            {
                "^.*$": 
                {
                    "type": "array",
                    "items":
                    {
                        "type":"string"
                    }
                }
            },
            "description": "(Optional) Preferred compiler/linker profiles for the script",
            "additionalProperties": false
        },
        "OverrideCompileFlags":
        {
            "type": "object",
            "patternProperties":
            {
                "^.*$": 
                {
                    "type": "object",
                    "properties":
                    {
                        "Remove": 
                        {
                            "type": "string",
                            "description": "Flags to be removed from the default compile flags, separated by space"
                        },
                        "Append":
                        {
                            "type": "string",
                            "description": "Additional flags to be appended to the default compile flags"
                        }
                    },
                    "additionalProperties": false,
                    "description": "Profile with the respective flags to override",
                    "required": ["Remove", "Append"]
                }
            },
            "additionalProperties": false,
            "description": "(Optional) Override the default compile flags"
        },
        "OverrideLinkFlags":
        {
            "type": "object",
            "patternProperties":
            {
                "^.*$": 
                {
                    "type": "object",
                    "properties":
                    {
                        "Remove": 
                        {
                            "type": "string",
                            "description": "Flags to be removed from the default compile flags, separated by space"
                        },
                        "Append":
                        {
                            "type": "string",
                            "description": "Additional flags to be appended to the default compile flags"
                        }
                    },
                    "additionalProperties": false,
                    "description": "Profile with the respective flags to override",
                    "required": ["Remove", "Append"]
                }
            },
            "additionalProperties": false,
            "description": "(Optional) Override the default link flags"
        },
        "Dependencies": 
        {
            "type": "array",
            "description": "(Optional) The list of dependencies needed by the script",
            "items": 
            {
                "type": "object",
                "properties": 
                {
                    "Name": 
                    {
                        "type": "string",
                        "description": "Dependency name"
                    },
                    "Platforms": 
                    {
                        "type": "array",
                        "items": { "type":"string" },
                        "description": "Supported platforms of the dependency"
                    },
                    "Source": 
                    {
                        "type": "object",
                        "properties": 
                        {
                            "Type": 
                            {
                                "type": "string", 
                                "enum": ["Git", "Local"],
                                "description": "The type of the dependency (Git/Local)"
                            },
                            "Value": 
                            {
                                "type": "string",
                                "description": "The location of the dependency (git repository location, local directory)"
                            }
                        },
                        "required": ["Type", "Value"],
                        "description": "The source of getting the dependency"
                    },
                    "LibraryType": 
                    {
                        "type": "string", 
                        "enum": ["Static", "Object", "Shared", "Header"],
                        "description": "Library Type (Static, Object, Shared, Header)"
                    },
                    "IncludePaths":
                    {
                        "type": "array",
                        "items": { "type":"string" },
                        "description": "Paths to be added to include paths"
                    },
                    "SearchProperties": 
                    {
                        "type": "object",
                        "patternProperties":
                        {
                            "^.*$": 
                            {
                                "type": "object",
                                "properties": 
                                {
                                    "SearchLibraryName": 
                                    {
                                        "type": "string",
                                        "description": "The library name to be searched for when linking against the script"
                                    },
                                    "SearchPath": 
                                    {
                                        "type": "string",
                                        "description": "The path to be searched for the dependency. {BuildType} will be replaced accordingly"
                                    }
                                },
                                "required": ["SearchLibraryName", "SearchPath"],
                                "additionalProperties": false,
                                "description": "Properties for searching the library binary for the profile"
                            }
                        },
                        "additionalProperties": false,
                        "description": "Searchable properties of the dependency"
                    },
                    "Setup": 
                    {
                        "type": "object",
                        "patternProperties":
                        {
                            "^.*$": 
                            {
                                "type": "object",
                                "patternProperties":
                                {
                                    "^.*$": 
                                    {
                                        "type": "array",
                                        "items": { "type":"string" },
                                        "description": "Setup commands for the specified profile. {BuildType} will be replaced accordingly"
                                    }
                                },
                                "additionalProperties": false,
                                "description": "Setup commands for the specified platform"
                            }
                        },
                        "additionalProperties": false,
                        "description": "(Optional) List of setup commands for the supported platforms"
                    }
                },
                "additionalProperties": false,
                "required": 
                [
                    "Name", 
                    "Platforms",
                    "Source",
                    "LibraryType", 
                    "SearchProperties"
                ],
                "uniqueItems": true
            }
        }
    }
}